<!DOCTYPE html>
<html>
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146824308-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-146824308-1');
    </script>
            
    <meta charset="utf-8">
    <title>Strava Data Insights</title>

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="../favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon/favicon-16x16.png">
    <link rel="manifest" href="../favicon/site.webmanifest">

    <!-- Facebook Opengraph -->
    <meta property="og:url" content="http://cultureplot.com/strava/" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Your Strava Data Insights" />
    <meta property="og:description" content="Connect To Strava To See Your Activity Data Visualized"/>

    <meta property="og:image" content="https://cultureplot.com/img/strava_lineplot_preview.png" />
    <meta property="og:image:alt" content="Lineplot of Strava running data" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="https://cultureplot.com/img/strava_lineplot_preview.png" />
    <meta name="twitter:image:alt" content="Lineplot of Strava activity data" />
    <meta name="twitter:description" content="Connect To Strava To See Your Activity Data Visualized"/>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
    <link rel="stylesheet" href="css/style.css">

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script type="text/javascript" src="https://rawgit.com/jieter/Leaflet.encoded/master/Polyline.encoded.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
</head>

<html>
<body>


<body>    
    <h1 style="margin-top:10vh;">Your Strava Activities In Four Charts</h1>
    <span class="bylineSpan">By <a href="https://cultureplot.com/about/" target="_blank">Oliver Gladfelter</a></span><span class="bylineSpan" style="color:gray;"></span>

    <div class="intro" id="intro">
        <p style="text-align:left;">Click the button below to authorize cultureplot.com to access your Strava data. None of your data or information is saved nor stored in any way.</p>
        <button><a href="https://www.strava.com/oauth/authorize?client_id=47842&response_type=code&redirect_uri=https://cultureplot.com/strava/index.html&approval_prompt=auto&scope=read_all,activity:read_all" style="color:black;">Strava Login</a></button> 
    </div>

    <hr style="width:25%; margin-top:30px;">
    
    <div style="display:inline-flex;">
        <h3 id="name"></h3>
        <img src="" id="profile_picture">
    </div>

    <div class="loader" id="loader"></div>
    
    <!-- dashboard container -->
    <div id="dashboard" style='visibility:hidden;'>

    <div class="dropdown" id="activitiesFilter">
        <button class="dropbtn" id="dropdownButton"></button>
        <div id="activityMenu" class="dropdown-content"></div>
    </div>

    <!-- beeswarm -->
    <div id="beeswarm" class="chartContainer">
        <h2>All activities</h2>
    </div>

    <!-- monthly mileage linplot -->
    <div id="mileageLineplot" class="chartContainer">
        <h2>Monthly mileage</h2>
    </div>

    <!-- animated heatmap -->
    <div class="row">
        <h2>Animated heatmap</h2>
        <div class="column left">
            <button id="playButton">Start animation</button>
            <button id="skipButton">Skip to end</button>
            <div style='margin-top:20px;'>
                <article>
                    Set the map to any view of interest, then click 'Start animation' to see your heatmap drawn one activity at a time. You won't be able to move the map during the animation, but you can end the animation by clicking 'Skip to end', which will also make the map interactive again.
                </article>
            </div>
        </div>
        <div class="column right">
            <div class="heatmapContainer">
                <div id="heatmap" style="width:80%; height:100%"></div>
            </div>
        </div>
    </div>
    <!--  -->

    <!-- this is the interactive annual goal tracker -->
    <div class="row" id="goalTracker">
        <h2>Goal tracker: annual mileage</h2>
        <div class="column left">
            <div id="sliderDiv" class="sliderDiv">
                <p style="margin: 0; margin-bottom: 5px;">Mileage Goal: <span id="sliderLabel">1,000</span></p>
                <input type="range" min="100" max="5000" value="1000" step="50" class="range-slider grad" id="slider">
            </div>
        </div>
        <div class="column right">
            <div id="goalplot" style="margin-top:0px;"></div>
        </div>
    </div>

    </div>
    <!-- end dashboard container -->

    <script src="js/strava_api.js"></script>
    <script src="js/script.js"></script>
    <script src="js/heatmap.js"></script>

</body>
</html>